<h2>Checkout</h2>

<p *ngIf="checkoutForm.invalid"> Form Error </p>

<p *ngIf="checkoutForm.dirty"> Form data changed </p>
 
<pre *ngIf="firstName.errors"> 
   firstName {{firstName.errors | json }}
</pre>


<pre *ngIf="coupon.errors"> 
   coupon {{coupon.errors | json }}
</pre>



<form  [formGroup]="checkoutForm" (ngSubmit)="checkout()"  >

    First Name <input type="text" formControlName="firstName" />

    
 State <select name="order.address.state" 
                formControlName="state"
                >
  
    <option *ngFor="let state of (states$ | async)" [value]="state.id">
        {{state.name}}
    </option>
</select>

City <select name="order.address.city" formControlName="city" >
    <option *ngFor="let city of (cities$ | async)" [value]="city.id">
        {{city.name}}
    </option>
</select>



<p>Values for Coupon FREEDOM or REPUBLIC </p>
Coupon <input type="text" formControlName="coupon" />


<button type="submit" [disabled]="checkoutForm.invalid">Save</button>


</form>


<pre>
    {{order | json}}
</pre>

<h5>saved order</h5>

<pre>
    {{order$ | async | json}}
</pre>